{"version":3,"sources":["webpack:///C:/Users/17623/Desktop/thinking beat思维跳动/components/my-sign-calendar/my-sign-calendar.vue?95ab","webpack:///C:/Users/17623/Desktop/thinking beat思维跳动/components/my-sign-calendar/my-sign-calendar.vue?fea2","webpack:///C:/Users/17623/Desktop/thinking beat思维跳动/components/my-sign-calendar/my-sign-calendar.vue?1f8f","webpack:///C:/Users/17623/Desktop/thinking beat思维跳动/components/my-sign-calendar/my-sign-calendar.vue?5574","uni-app:///components/my-sign-calendar/my-sign-calendar.vue","webpack:///C:/Users/17623/Desktop/thinking beat思维跳动/components/my-sign-calendar/my-sign-calendar.vue?9ecb","webpack:///C:/Users/17623/Desktop/thinking beat思维跳动/components/my-sign-calendar/my-sign-calendar.vue?7449"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACoE;AACL;AACc;;;AAG7E;AACgL;AAChL,gBAAgB,yLAAU;AAC1B,EAAE,sFAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAiqB,CAAgB,srBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACgErrB;AACA;AACA;AACA,kBADA;AAEA;AACA;AACA,OAJA,EADA;;AAOA;AACA,iBADA;AAEA,oBAFA,EAPA,EADA;;;AAaA,MAbA,kBAaA;AACA;AACA,mBADA,EACA;AACA,kBAFA,EAEA;AACA,iBAHA,EAGA;AACA,kBAJA,EAIA;AACA,2CALA,EAKA;AACA,kDANA,EAMA;AACA,gDAPA,EAOA;;AAEA;AACA,kBAVA,EAUA;AACA,kBAXA,EAWA;AACA,iBAZA,EAYA;AACA,mBAbA;AAcA,kBAdA,CAcA;AAdA;AAgBA,GA9BA;AA+BA,SA/BA,qBA+BA;AACA;AACA,GAjCA;AAkCA;AACA;AACA,YAFA,sBAEA;AACA;AACA,mDAFA;AAGA,mBAHA,yCAGA,EAHA,gBAGA,EAHA,gBAGA,EAHA;AAIA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA,OANA,MAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBADA;AAEA,uBAFA;AAGA,kBAHA;;AAKA;AACA;AACA;AACA;AACA,KAnCA;AAoCA;AACA,UArCA,oBAqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BADA;AAEA,8BAFA;AAGA,kBAHA;AAIA,uBAJA;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA5DA;AA6DA;;;;;;AAMA,aAnEA,qBAmEA,IAnEA,EAmEA,KAnEA,EAmEA,QAnEA,EAmEA,IAnEA,EAmEA;AACA;AACA;AACA,0DADA;AAEA;AACA;AACA,6CADA;AAEA,6CAFA;AAGA,8CAHA;AAIA,uDATA,CASA;AACA;AACA;AACA;AACA,qBADA;AAEA,uBAFA;AAGA,wBAHA;AAIA,wBAJA;;AAMA;AACA;AACA;AACA;AACA,uBADA;AAEA,yBAFA;AAGA,oBAHA;AAIA,0BAJA;;AAMA;AACA;AACA;AACA,KAjGA;AAkGA;AACA,cAnGA,wBAmGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAPA;AAQA;AACA,KA7GA;AA8GA;AACA,YA/GA,oBA+GA,KA/GA,EA+GA;AACA;AACA;AACA;AACA;AACA;AACA,KArHA;AAsHA;AACA,qBAvHA,6BAuHA,IAvHA,EAuHA,KAvHA,EAuHA,GAvHA,EAuHA;AACA;AACA,KAzHA;AA0HA;AACA,gBA3HA,0BA2HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KArIA;AAsIA;AACA,aAvIA,qBAuIA,KAvIA,EAuIA,IAvIA,EAuIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBADA;AAEA,yBAFA;AAGA,wBAHA;;AAKA;AACA,SAfA,MAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBADA;AAEA,yBAFA;AAGA,wBAHA;;AAKA;AACA;AACA;AACA,KAtLA;AAuLA,gBAvLA,wBAuLA,CAvLA,EAuLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA9LA;AA+LA;AACA,cAhMA,wBAgMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BADA;AAEA,6BAFA;AAGA,uBAHA;;AAKA;AACA,OAhBA;AAiBA;AACA;AACA;AACA;AACA;AACA,KA1NA;AA2NA,gBA3NA,wBA2NA,CA3NA,EA2NA,CA3NA,EA2NA,CA3NA,EA2NA;AACA;AACA;AACA;AACA,KA/NA;AAgOA;AACA,cAjOA,sBAiOA,GAjOA,EAiOA;AACA;AACA;AACA,OAFA;AAGA;AACA,KAtOA;AAuOA;AACA,oBAxOA,4BAwOA,IAxOA,EAwOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAnPA;AAoPA,gBApPA,wBAoPA,KApPA,EAoPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAhQA,EAlCA,E;;;;;;;;;;;;AChEA;AAAA;AAAA;AAAA;AAA+sC,CAAgB,grCAAG,EAAC,C;;;;;;;;;;;ACAnuC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/my-sign-calendar/my-sign-calendar.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./my-sign-calendar.vue?vue&type=template&id=0726d8a4&\"\nvar renderjs\nimport script from \"./my-sign-calendar.vue?vue&type=script&lang=js&\"\nexport * from \"./my-sign-calendar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./my-sign-calendar.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/my-sign-calendar/my-sign-calendar.vue\"\nexport default component.exports","export * from \"-!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./my-sign-calendar.vue?vue&type=template&id=0726d8a4&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./my-sign-calendar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./my-sign-calendar.vue?vue&type=script&lang=js&\"","<template>\r\n  <view>\r\n    <!-- 日历头部 -->\r\n    <view class=\"r-header\" v-if=\"signData.type == 'month'\">\r\n      <view class=\"r-header-icon prev\" v-if=\"indexMonth < (longList.length - 1)\" @tap=\"nextDate(1)\">\r\n        <view class=\"icon-direction left\"></view>\r\n      </view>\r\n      <view class=\"title\">{{showList.year}}年{{showList.month}}月</view>\r\n      <view class=\"r-header-icon next\" v-if=\"indexMonth > 0\" @tap=\"nextDate(-1)\">\r\n        <view class=\"icon-direction right\"></view>\r\n      </view>\r\n    </view>\r\n    <view class=\"r-header\" v-if=\"signData.type == 'week'\">\r\n      <view class=\"r-header-icon prev\" v-if=\"weekIndex > 0\" @tap=\"nextWeekDate(-1)\">\r\n        <view class=\"icon-direction left\"></view>\r\n      </view>\r\n      <view class=\"title\">{{yeatTitle.year}}年{{yeatTitle.month}}月 第{{yeatTitle.week}}周</view>\r\n      <view class=\"r-header-icon next\" v-if=\"weekIndex < (weekList.length - 1)\" @tap=\"nextWeekDate(1)\">\r\n        <view class=\"icon-direction right\"></view>\r\n      </view>\r\n    </view>\r\n    <!-- 日历星期 -->\r\n    <view class=\"r-week\">\r\n      <view class=\"item\">日</view>\r\n      <view class=\"item\">一</view>\r\n      <view class=\"item\">二</view>\r\n      <view class=\"item\">三</view>\r\n      <view class=\"item\">四</view>\r\n      <view class=\"item\">五</view>\r\n      <view class=\"item\">六</view>\r\n    </view>\r\n    <!-- 日历主体(月) -->\r\n    <view class=\"r-content\" v-if=\"signData.type == 'month'\">\r\n      <view class=\"r-content-box\">\r\n        <view class=\"item\" v-for=\"(item, index) in showList.data\" :key=\"index\">\r\n          <view class=\"text\" \r\n            :class=\"item.type == 'notday' ? 'after' : item.isSign ? 'active' : ''\" \r\n            @tap=\"signClick(index, 'month')\"\r\n          >{{item.day}}\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    <!-- 日历主体(周) -->\r\n    <view class=\"r-content\" v-if=\"signData.type == 'week'\">\r\n      <swiper class=\"week-box\" :duration=\"300\" :current=\"weekIndex\" @change=\"touchendWeek\">\r\n        <swiper-item v-for=\"(itemp, indexp) in weekList\" :key=\"indexp\">\r\n          <view class=\"swiper-item\">\r\n            <view class=\"r-content-week\">\r\n              <view class=\"item\" v-for=\"(item, index) in itemp\" :key=\"index\">\r\n                <view class=\"text\" \r\n                  :class=\"item.type == 'notday' ? 'after' : item.isSign ? 'active' : ''\" \r\n                  @tap=\"signClick(index, 'week')\"\r\n                >{{item.day}}</view>\r\n              </view>\r\n            </view>\r\n          </view>\r\n        </swiper-item>\r\n      </swiper>\r\n    </view>\r\n  </view>\n</template>\n\n<script>\r\n  export default {\r\n    props: {\r\n      signData: {\r\n        type: Object,\r\n        default: () => {\r\n          return []\r\n        }\r\n      },\r\n      signList: {\r\n        type: Array,\r\n        default: Array\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        indexMonth: 0, // 当前显示月的index\r\n        longList: [], // 从signData.start 到当前的年份月份\r\n        nowList: {}, // 当前月日期数据\r\n        showList: {}, // 显示月日期数据\r\n        today: parseInt(new Date().getDate()), //本日\r\n        toMonth: parseInt(new Date().getMonth() + 1), //本月\r\n        toYear: parseInt(new Date().getFullYear()), //本年\r\n        \r\n        // 周单位滑动\r\n        weekIndex: 0, // 当前周index\r\n        weekList: [], // 周的列表\r\n        yeatDay: [], // title信息\r\n        yeatTitle: {},\r\n        nextIndex: 0 // 记录已加载签到数据的周\r\n      }\r\n    },\r\n    mounted() {\r\n      this.getMonth()\r\n    },\r\n    methods: {\r\n      // 获取longList数据\r\n      getMonth() {\r\n        // 获取start到当前月共多少月\r\n        let _s = this.signData.start || '2019-08-01'\r\n        let [_y, _m, _d] = _s.split('-')\r\n        let _sy = this.toYear - _y, _sm = 0\r\n        if(_sy > 0) { // 跨年\r\n          if(_sy == 1) {\r\n            _sm = 12 - _m + this.toMonth\r\n          }else {\r\n            _sm = (_sy - 1) * 12 + (12 - _m) + this.toMonth\r\n          }\r\n        }else {\r\n          _sm = this.toMonth - _m\r\n        }\r\n        let y_index = this.toYear, m_index = this.toMonth\r\n        // 遍历添加数组\r\n        for(let i = 0; i <= _sm; i++) {\r\n          let _month = m_index - i, _year = this.toYear\r\n          for(let _i = 0; _i < _sy; _i++) {\r\n            if(_month <= 0) {\r\n              _month += 12\r\n              _year -= 1\r\n            }\r\n          }\r\n          this.longList.push({\r\n            year: _year,\r\n            month: _month,\r\n            data: []\r\n          })\r\n          // 获取每个月的天数\r\n          // let _day = new Date(this.toYear, this.toMonth, 0), _daycount = _day.getDate()\r\n        }\r\n        this.getDay()\r\n      },\r\n      // 获取每个月天数\r\n      getDay() {\r\n        for(let i = 0, _i = this.longList.length; i < _i; i++) {\r\n          let _data = this.longList[i]\r\n          let _day = new Date(_data.year, _data.month, 0), _daycount = _day.getDate()\r\n          let _dayData = []\r\n          // 当月一号前空格\r\n          for(let j = 1; j <= _daycount; j++) { // 遍历每个月天数\r\n            _dayData.push({\r\n              year: _data.year,\r\n              month: _data.month,\r\n              day: j,\r\n              type: 'day'\r\n            })\r\n          }\r\n          this.longList[i].data = this.getDayEnd(_data.year, _data.month, _daycount, _dayData)\r\n        }\r\n        // 渲染当前显示页\r\n        if(this.signData.type == 'month') {\r\n          this.getNowData()\r\n        }\r\n        if(this.signData.type == 'week') {\r\n          this.getNowWeek()\r\n        }\r\n      },\r\n      /* \r\n        补全当前月开头结尾\r\n        @param {Number} year \r\n        @param {Number} month \r\n        @param {Number} daycount 当前月天数\r\n      */\r\n      getDayEnd(year, month, daycount, data) {\r\n        // 获取当前月第一天和最后一天是星期几\r\n        let first = this.getFirstDayOfWeek(year, month, 1), \r\n          last = this.getFirstDayOfWeek(year, month, daycount)\r\n        // 获取上个月最后一天\r\n        let _month = month - 1 < 1 ? 12 : month - 1, \r\n          _year = month - 1 < 1 ? year - 1 : year,\r\n          month_ = month + 1 > 12 ? 1 : month + 1,\r\n          year_ = month + 1 > 12 ? year + 1 : year\r\n        let _prev = new Date(_year, _month, 0).getDate() // 上一月多少天\r\n        // 处理数据\r\n        for(let i = 0; i < first; i++) {\r\n          data.unshift({\r\n            year: _year,\r\n            month: _month,\r\n            day: _prev - i,\r\n            type: 'notday'\r\n          })\r\n        }\r\n        if(7 - last > 1) {\r\n          for(let i = 1; i < 7 - last; i++) {\r\n            data.push({\r\n              year: year_,\r\n              month: month_,\r\n              day: i,\r\n              type: 'notday'\r\n            })\r\n          }\r\n        }\r\n        return data\r\n      },\r\n      // 获取当前月日历\r\n      getNowData() {\r\n        this.longList.map((item, index) => {\r\n          if(item.year == this.toYear) {\r\n            if(item.month == this.toMonth) {\r\n              this.nowList = item\r\n              this.showList = item\r\n            }\r\n          }\r\n        })\r\n        this.signViewShow()\r\n      },\r\n      // 上下月份切换（上一月indexMonth+1，下一月indexMonth-1）\r\n      nextDate(index) {\r\n        this.indexMonth += index\r\n        if(this.indexMonth < 0) {this.indexMonth = 0}\r\n        if(this.indexMonth > this.longList.length - 1) {this.indexMonth = this.longList.length - 1}\r\n        this.showList = this.longList[this.indexMonth]\r\n        this.signViewShow()\r\n      },\r\n      // 获取当月第一天星期几\r\n      getFirstDayOfWeek(year, month, day) {\r\n      \treturn new Date(Date.UTC(year, month - 1, day)).getDay()\r\n      },\r\n      // 加载已签到信息\r\n      signViewShow() {\r\n        let days = this.showList.data, dayArr = this.signList\r\n        for(let i = 0, _i = days.length; i < _i; i++) {\r\n          for(let j = 0, _j = dayArr.length; j < _j; j++) {\r\n            if(dayArr[j].year == days[i].year && dayArr[j].month == days[i].month && dayArr[j].day == days[i].day) {\r\n              days[i].isSign = true\r\n            }\r\n          }\r\n        }\r\n        this.showList.data = days\r\n      },\r\n      // 签到操作\r\n      signClick(index, type) {\r\n        let days = {}\r\n        if(type == 'week') {\r\n          days = this.weekList[this.weekIndex][index]\r\n        }\r\n        if(type == 'month') {\r\n          days = this.showList.data[index]\r\n        }\r\n        let _y = days.year, _m = days.month, _d = days.day\r\n        let click_data = _y + '-' + _m + '-' + _d, now_data = this.toYear + '-' + this.toMonth + '-' + this.today\r\n        let _n = new Date(click_data), _z = new Date(now_data)\r\n        let __n = _n.getTime(_n), __z = _z.getTime(_z)\r\n        if(__z >= __n) {\r\n          if(__z == __n) { // 当天签到\r\n            if(!days.isSign) {\r\n              days.isSign = true\r\n              if(type == 'month') {\r\n                this.$set(this.showList.data, index, days)\r\n              }\r\n              if(type == 'week') {\r\n                this.$set(this.weekList[this.weekIndex], index, days)\r\n              }\r\n\t\t\t\t\t\t\tthis.$emit('callbackSign', {\r\n\t\t\t\t\t\t\t\ttype: true,\r\n\t\t\t\t\t\t\t\tmsg: '签到成功',\r\n\t\t\t\t\t\t\t\tdata: days\r\n\t\t\t\t\t\t\t})\r\n            }\r\n          }else { // 补签\r\n            if(!this.signData.ismake) {return false}\r\n            if(days.type == 'notday') {return false}\r\n            if(!days.isSign) {\r\n              days.isSign = true\r\n              if(type == 'month') {\r\n                this.$set(this.showList.data, index, days)\r\n              }\r\n              if(type == 'week') {\r\n                this.$set(this.weekList[this.weekIndex], index, days)\r\n              }\r\n\t\t\t\t\t\t\tthis.$emit('callbackSign', {\r\n\t\t\t\t\t\t\t\ttype: false,\r\n\t\t\t\t\t\t\t\tmsg: '补签成功',\r\n\t\t\t\t\t\t\t\tdata: days\r\n\t\t\t\t\t\t\t})\r\n            }\r\n          }\r\n        }\r\n      },\r\n      touchendWeek(e) {\r\n        this.weekIndex = e.detail.current\r\n        this.yeatTitle = this.yeatDay[this.weekIndex]\r\n        if(this.nextIndex > this.weekIndex) {\r\n          this.weekList = this.signViewShowWeek(this.weekList)\r\n          this.nextIndex = this.weekIndex\r\n        }\r\n      },\r\n      // 获取当前周的信息\r\n      getNowWeek() {\r\n        // month数据已做过处理，若当月一号不为周日，则往前面补位('', '', '', '1', '2')\r\n        let _list = this.longList, _ = [], _yeatDay = []\r\n        _list.reverse()\r\n        _list.map((item, index) => {\r\n          let num = Math.ceil(item.data.length / 7)\r\n          // 在当前月只保留到当前周\r\n          // 获取当前天是当前月第几周\r\n          let __n = this.getMonthWeek(this.toYear, this.toMonth, this.today)\r\n          if(index == _list.length - 1) {\r\n            num = __n\r\n          }\r\n          for(let i = 0; i < num; i++) {\r\n            _.push(item.data.slice(i * 7, i * 7 + 7))\r\n            _yeatDay.push({\r\n              year: item.year,\r\n              month: item.month,\r\n              week: i + 1\r\n            })\r\n          }\r\n        })\r\n        this.yeatDay = _yeatDay\r\n        this.weekIndex = _.length - 1\r\n        this.nextIndex = this.weekIndex\r\n        this.weekList = this.signViewShowWeek(_)\r\n        this.yeatTitle = this.yeatDay[this.weekIndex]\r\n      },\r\n      getMonthWeek(a, b, c) {\r\n        let _k = new Date(a, b - 1, c), w = _k.getDay(), d = _k.getDate()\r\n        if(w == 0) {w = 7}\r\n        return Math.ceil((d + 6 - w) / 7)\r\n      },\r\n      // 二维数组换一维数组\r\n      reduceWeek(arr) {\r\n        let _arr = arr.reduce((a, b) => {\r\n          return a.concat(b)\r\n        })\r\n        return _arr\r\n      },\r\n      // 加载已签到信息\r\n      signViewShowWeek(data) {\r\n        let days = data[this.weekIndex], dayArr = this.signList\r\n        for(let i = 0, _i = days.length; i < _i; i++) {\r\n          for(let j = 0, _j = dayArr.length; j < _j; j++) {\r\n            if(dayArr[j].year == days[i].year && dayArr[j].month == days[i].month && dayArr[j].day == days[i].day) {\r\n              days[i].isSign = true\r\n            }\r\n          }\r\n        }\r\n        data[this.weekIndex] = days\r\n        return data\r\n      },\r\n      nextWeekDate(index) {\r\n        this.weekIndex += index\r\n        if(this.weekIndex < 0) {\r\n          this.weekIndex = 0\r\n          return false\r\n        }\r\n        if(this.weekIndex > this.weekList.length - 1) {\r\n          this.weekIndex = this.weekList.length - 1\r\n          return false\r\n        }\r\n        this.weekList = this.signViewShowWeek(this.weekList)\r\n        this.yeatTitle = this.yeatDay[this.weekIndex]\r\n      }\r\n    }\r\n  }\n</script>\n\n<style lang=\"scss\">\r\n  .r-header {\r\n    background-color: #fff;\r\n    color: #4CD964;\r\n    position: relative;\r\n    .title {\r\n      height: 88upx;\r\n      line-height: 88upx;\r\n      font-size: 28upx;\r\n      text-align: center;\r\n    }\r\n  }\r\n  .r-header::before, .r-header::after, .r-content::after {\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    height: 1px;\r\n    content: '';\r\n    background-color: #f2f2f2;\r\n    transform: scaleY(.6);\r\n  }\r\n  .r-header::before {\r\n    top: 0;\r\n  }\r\n  .r-header::after, .r-content::after {\r\n    bottom: 0;\r\n  }\r\n  .r-header-icon {\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 0;\r\n    width: 88upx;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    color: #666;\r\n    font-size: 26upx;\r\n  }\r\n  .r-header-icon.prev {\r\n    left: 0;\r\n  }\r\n  .r-header-icon.next {\r\n    right: 0;\r\n  }\r\n  .r-week {\r\n    padding: 0 20upx;\r\n    height: 88upx;\r\n    display: flex;\r\n    align-items: center;\r\n    font-size: 24upx;\r\n    color: #999;\r\n    .item {\r\n      flex: 1;\r\n      text-align: center;\r\n    }\r\n  }\r\n  .r-content {\r\n    padding: 0 20upx 10upx;\r\n    position: relative;\r\n  }\r\n  .r-content-box {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    .item {\r\n      box-sizing: border-box;\r\n      width: 14.285%;\r\n      padding-bottom: 20upx;\r\n    }\r\n    .text {\r\n      box-sizing: border-box;\r\n      width: 60upx;\r\n      height: 60upx;\r\n      text-align: center;\r\n      font-size: 22upx;\r\n      line-height: 60upx;\r\n      color: #999;\r\n      border: 1upx solid #999;\r\n      border-radius: 50%;\r\n      margin: 0 auto;\r\n    }\r\n    // 选中样式\r\n    .text.active {\r\n      color: #4CD964;\r\n      border-color: #4CD964;\r\n    }\r\n    // 漏签样式\r\n    .text.not {\r\n      color: #fff;\r\n      border-color: #e4e4e4;\r\n      background-color: #e4e4e4;\r\n    }\r\n    // 补全样式\r\n    .text.after {\r\n      color: #eee;\r\n      border-color: #f2f2f2;\r\n    }\r\n  }\r\n  .icon-direction {\r\n    border: 20upx solid transparent;\r\n  }\r\n  .icon-direction.left {\r\n    border-right-color: #f2f2f2;\r\n    transform: scale(1.1, .6);\r\n  }\r\n  .icon-direction.right {\r\n    border-left-color: #f2f2f2;\r\n    transform: scale(1.1, .6);\r\n  }\r\n  .week-box {\r\n    white-space: nowrap;\r\n    height: 70upx;\r\n  }\r\n  .r-content-week {\r\n    width: 100%;\r\n    display: inline-block;\r\n    vertical-align: top;\r\n    white-space: nowrap;\r\n    .item {\r\n      display: inline-block;\r\n      vertical-align: top;\r\n      box-sizing: border-box;\r\n      width: 14.285%;\r\n      padding-bottom: 20upx;\r\n    }\r\n    .text {\r\n      box-sizing: border-box;\r\n      width: 60upx;\r\n      height: 60upx;\r\n      text-align: center;\r\n      font-size: 22upx;\r\n      line-height: 60upx;\r\n      color: #999;\r\n      border: 1upx solid #999;\r\n      border-radius: 50%;\r\n      margin: 0 auto;\r\n    }\r\n    // 选中样式\r\n    .text.active {\r\n      color: #4CD964;\r\n      border-color: #4CD964;\r\n    }\r\n    // 漏签样式\r\n    .text.not {\r\n      color: #fff;\r\n      border-color: #e4e4e4;\r\n      background-color: #e4e4e4;\r\n    }\r\n    // 补全样式\r\n    .text.after {\r\n      color: #eee;\r\n      border-color: #f2f2f2;\r\n    }\r\n  }\n</style>\n","import mod from \"-!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./my-sign-calendar.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\hbuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./my-sign-calendar.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1621748567938\n      var cssReload = require(\"D:/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}